!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/web.dom-collections.iterator")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/web.dom-collections.iterator"],t):t((e=e||self).MObserver={})}(this,(function(e){"use strict";function t(e){return"function"==typeof e}function r(e){return e instanceof MutationObserver}class n{constructor(e){if(e instanceof n?this.el=e.el:!function(e){return"string"==typeof e}(e)?(function(e){return e instanceof Node}(e)||function(e){return e instanceof Element}(e))&&(this.el=e):this.el=document.querySelector(e),!this.el)throw new Error("无效的监听对象！")}data(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.el.dataSource;return r||(r=new Map,this.el.dataSource=r),void 0!==t?(r.set(e,t),this):r.get(e)}}function o(e){return new n(e)}function i(e){let t=e.data("m-observer");return t||(t=new Map,e.data("m-observer",t)),t}function c(e,t,r){let n=i(e),o=n.get(t);if(o&&o.observer){let e=o.observer.takeRecords();o.callback(e,o.observer),o.observer.disconnect()}n.set(t,r)}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=i(e),o=n.get(t);return r&&n.delete(t),o||{}}function s(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=o(e);if(!t(r))throw new Error("无效的观察回到函数！");let s=i?r:function(e,t){for(let n of e)r(n,t)},u=new MutationObserver(s);u.observe(l.el,n),c(l,r,{config:n,fn:s,observer:u})}e.attribute=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={subtree:!!r,attributes:!0,attributeOldValue:!0};s(e,t,o,n)},e.attributeFilter=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={subtree:!!n,attributes:!0,attributeFilter:r,attributeOldValue:!0};s(e,t,i,o)},e.character=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={subtree:!0,characterData:!0,characterDataOldValue:!0};s(e,t,n,r)},e.childList=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={subtree:!!r,childList:!0};s(e,t,o,n)},e.disconnect=function(e,t){let n=o(e),{observer:i,fn:c}=l(n,t);if(r(i)){c(i.takeRecords(),i),i.disconnect()}},e.observe=s,e.observeAll=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0};Array.isArray(r)&&(o.attributeFilter=r),s(e,t,o,n)},e.reconnect=function(e,t){let n=o(e),{observer:i,config:c}=l(n,t);if(!r(i))throw new Error("该监听器不存在（未定义或已被移除）！");i.observe(n.el,c)},e.remove=function(e,t){let n=o(e),{observer:i,fn:c}=l(n,t,!0);if(r(i)){c(i.takeRecords(),i),i.disconnect()}},Object.defineProperty(e,"__esModule",{value:!0})}));
