!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("core-js/modules/es.regexp.to-string"),require("core-js/modules/web.dom-collections.iterator")):"function"==typeof define&&define.amd?define(["core-js/modules/es.regexp.to-string","core-js/modules/web.dom-collections.iterator"],e):(t=t||self).MObserver=e()}(this,(function(){"use strict";function t(t,e){var r=e.get(t);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(t):r.value}function e(t,e,r){var i=e.get(t);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(t,r);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=r}return r}function r(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var i=new WeakMap,n=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakSet,o=new WeakSet;var u=function(){return{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}},h=function(){return"".concat(this.prefix,"Mobserver")},c=function(e,r,n){let s=this.getCacheKey(e),a=new MutationObserver(r||function(t){console.log(t)}),l=t(this,i).get(s)||{};return l[n=n||this.uuid()]=a,t(this,i).set(s,l),{name:n,observer:a}},d=function(t,e,i,n){t=this.selector(t);let s=r(this,l,c).call(this,t,e,n);return s.observer.observe(t,i),s};return new class{constructor(){o.add(this),l.add(this),a.set(this,{get:h,set:void 0}),s.set(this,{get:u,set:void 0}),i.set(this,{writable:!0,value:void 0}),n.set(this,{writable:!0,value:"zc"}),e(this,i,new Map)}get prefix(){return t(this,n)}set prefix(t){e(this,n,"string"==typeof t&&t.length?t:"zc")}uuid(){return[Math.random().toString(16).slice(2),(new Date).getTime().toString(16),Math.random().toString(16).slice(2)].join("").slice(2,34)}selector(t){if("string"==typeof t&&(t=document.querySelector(t)),!(t&&t instanceof HTMLElement))throw new Error("无效的 target！");return t}getCacheKey(e){let r=(e=this.selector(e)).dataset[t(this,a)];return r||(r=this.uuid(),e.dataset[t(this,a)]=r),r}observe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return i=i||{},r(this,o,d).call(this,t,e,i,n)}observeAll(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=t(this,s);return Array.isArray(n)&&n.length&&(l.attributeFilter=n),r(this,o,d).call(this,e,i,l,a)}attribute(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r(this,o,d).call(this,t,e,{attributes:!0,attributeOldValue:!0},i)}attributeChild(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r(this,o,d).call(this,t,e,{subtree:!0,attributes:!0,attributeOldValue:!0},i)}attributeFilter(t,e,i,n){let s={attributes:!0,attributeFilter:i,attributeOldValue:!0};return r(this,o,d).call(this,t,e,s,n)}attributeFilterChild(t,e,i,n){let s={subtree:!0,attributes:!0,attributeFilter:i,attributeOldValue:!0};return r(this,o,d).call(this,t,e,s,n)}node(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r(this,o,d).call(this,t,e,{childList:!0},i)}nodeChild(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r(this,o,d).call(this,t,e,{subtree:!0,childList:!0},i)}character(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r(this,o,d).call(this,t,e,{subtree:!0,characterData:!0,characterDataOldValue:!0},i)}disconnect(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getCacheKey(e),s=t(this,i).get(n);if(s){if(null===r)return Object.values(s).forEach(t=>{t.disconnect()}),!0;if(r&&s[r])return s[r].disconnect(),!0}return!1}takeRecords(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getCacheKey(e),s=t(this,i).get(n),a={};if(s){if(null===r)for(let t in s)a[t]=s[t].takeRecords();r&&s[r]&&(a[r]=s[r].takeRecords())}return a}}}));
