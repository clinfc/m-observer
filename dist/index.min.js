!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MObserver=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),u=function(t){return"object"==typeof t?null!==t:"function"==typeof t},a=n.document,c=u(a)&&u(a.createElement),l=function(t){return c?a.createElement(t):{}},s=!i&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a})),f=function(t){if(!u(t))throw TypeError(String(t)+" is not an object");return t},p=function(t,e){if(!u(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!u(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!u(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!u(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},h=Object.defineProperty,y={f:i?h:function(t,e,r){if(f(t),e=p(e,!0),f(r),s)try{return h(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g=i?function(t,e,r){return y.f(t,e,d(1,r))}:function(t,e,r){return t[e]=r,t},v={}.hasOwnProperty,b=function(t,e){return v.call(t,e)},m=function(t,e){try{g(n,t,e)}catch(r){n[t]=e}return e},S=n["__core-js_shared__"]||m("__core-js_shared__",{}),O=Function.toString;"function"!=typeof S.inspectSource&&(S.inspectSource=function(t){return O.call(t)});var w,j,T,L=S.inspectSource,M=n.WeakMap,k="function"==typeof M&&/native code/.test(L(M)),E=e((function(t){(t.exports=function(t,e){return S[t]||(S[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),P=0,_=Math.random(),x=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++P+_).toString(36)},A=E("keys"),C=function(t){return A[t]||(A[t]=x(t))},I={},R=n.WeakMap;if(k){var F=new R,V=F.get,D=F.has,G=F.set;w=function(t,e){return G.call(F,t,e),e},j=function(t){return V.call(F,t)||{}},T=function(t){return D.call(F,t)}}else{var W=C("state");I[W]=!0,w=function(t,e){return g(t,W,e),e},j=function(t){return b(t,W)?t[W]:{}},T=function(t){return b(t,W)}}var N={set:w,get:j,has:T,enforce:function(t){return T(t)?j(t):w(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=j(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},z=e((function(t){var e=N.get,r=N.enforce,o=String(String).split("String");(t.exports=function(t,e,i,u){var a=!!u&&!!u.unsafe,c=!!u&&!!u.enumerable,l=!!u&&!!u.noTargetGet;"function"==typeof i&&("string"!=typeof e||b(i,"name")||g(i,"name",e),r(i).source=o.join("string"==typeof e?e:"")),t!==n?(a?!l&&t[e]&&(c=!0):delete t[e],c?t[e]=i:g(t,e,i)):c?t[e]=i:m(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||L(this)}))})),H=function(){var t=f(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},K=RegExp.prototype,q=K.toString,B=o((function(){return"/a/b"!=q.call({source:"a",flags:"b"})})),Y="toString"!=q.name;(B||Y)&&z(RegExp.prototype,"toString",(function(){var t=f(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in K)?H.call(t):r)}),{unsafe:!0});var U,X={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},J={}.toString,Q="".split,Z=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return J.call(t).slice(8,-1)}(t)?Q.call(t,""):Object(t)}:Object,$=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},tt=function(t){return Z($(t))},et=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),rt=et&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,nt=E("wks"),ot=n.Symbol,it=rt?ot:ot&&ot.withoutSetter||x,ut=function(t){return b(nt,t)||(et&&b(ot,t)?nt[t]=ot[t]:nt[t]=it("Symbol."+t)),nt[t]},at=Math.ceil,ct=Math.floor,lt=function(t){return isNaN(t=+t)?0:(t>0?ct:at)(t)},st=Math.min,ft=Math.max,pt=Math.min,ht=function(t){return function(e,r,n){var o,i,u=tt(e),a=(o=u.length)>0?st(lt(o),9007199254740991):0,c=function(t,e){var r=lt(t);return r<0?ft(r+e,0):pt(r,e)}(n,a);if(t&&r!=r){for(;a>c;)if((i=u[c++])!=i)return!0}else for(;a>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}},yt={includes:ht(!0),indexOf:ht(!1)}.indexOf,dt=function(t,e){var r,n=tt(t),o=0,i=[];for(r in n)!b(I,r)&&b(n,r)&&i.push(r);for(;e.length>o;)b(n,r=e[o++])&&(~yt(i,r)||i.push(r));return i},gt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vt=Object.keys||function(t){return dt(t,gt)},bt=i?Object.defineProperties:function(t,e){f(t);for(var r,n=vt(e),o=n.length,i=0;o>i;)y.f(t,r=n[i++],e[r]);return t},mt=n,St=function(t){return"function"==typeof t?t:void 0},Ot=function(t,e){return arguments.length<2?St(mt[t])||St(n[t]):mt[t]&&mt[t][e]||n[t]&&n[t][e]},wt=Ot("document","documentElement"),jt=C("IE_PROTO"),Tt=function(){},Lt=function(t){return"<script>"+t+"<\/script>"},Mt=function(){try{U=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Mt=U?function(t){t.write(Lt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(U):((e=l("iframe")).style.display="none",wt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Lt("document.F=Object")),t.close(),t.F);for(var r=gt.length;r--;)delete Mt.prototype[gt[r]];return Mt()};I[jt]=!0;var kt=Object.create||function(t,e){var r;return null!==t?(Tt.prototype=f(t),r=new Tt,Tt.prototype=null,r[jt]=t):r=Mt(),void 0===e?r:bt(r,e)},Et=ut("unscopables"),Pt=Array.prototype;null==Pt[Et]&&y.f(Pt,Et,{configurable:!0,value:kt(null)});var _t,xt,At,Ct=function(t){Pt[Et][t]=!0},It={}.propertyIsEnumerable,Rt=Object.getOwnPropertyDescriptor,Ft={f:Rt&&!It.call({1:2},1)?function(t){var e=Rt(this,t);return!!e&&e.enumerable}:It},Vt=Object.getOwnPropertyDescriptor,Dt={f:i?Vt:function(t,e){if(t=tt(t),e=p(e,!0),s)try{return Vt(t,e)}catch(t){}if(b(t,e))return d(!Ft.f.call(t,e),t[e])}},Gt=gt.concat("length","prototype"),Wt={f:Object.getOwnPropertyNames||function(t){return dt(t,Gt)}},Nt={f:Object.getOwnPropertySymbols},zt=Ot("Reflect","ownKeys")||function(t){var e=Wt.f(f(t)),r=Nt.f;return r?e.concat(r(t)):e},Ht=function(t,e){for(var r=zt(e),n=y.f,o=Dt.f,i=0;i<r.length;i++){var u=r[i];b(t,u)||n(t,u,o(e,u))}},Kt=/#|\.prototype\./,qt=function(t,e){var r=Yt[Bt(t)];return r==Xt||r!=Ut&&("function"==typeof e?o(e):!!e)},Bt=qt.normalize=function(t){return String(t).replace(Kt,".").toLowerCase()},Yt=qt.data={},Ut=qt.NATIVE="N",Xt=qt.POLYFILL="P",Jt=qt,Qt=Dt.f,Zt=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),$t=C("IE_PROTO"),te=Object.prototype,ee=Zt?Object.getPrototypeOf:function(t){return t=Object($(t)),b(t,$t)?t[$t]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?te:null},re=ut("iterator"),ne=!1;[].keys&&("next"in(At=[].keys())?(xt=ee(ee(At)))!==Object.prototype&&(_t=xt):ne=!0),null==_t&&(_t={}),b(_t,re)||g(_t,re,(function(){return this}));var oe={IteratorPrototype:_t,BUGGY_SAFARI_ITERATORS:ne},ie=y.f,ue=ut("toStringTag"),ae=function(t,e,r){t&&!b(t=r?t:t.prototype,ue)&&ie(t,ue,{configurable:!0,value:e})},ce=oe.IteratorPrototype,le=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return f(r),function(t){if(!u(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),se=oe.IteratorPrototype,fe=oe.BUGGY_SAFARI_ITERATORS,pe=ut("iterator"),he=function(){return this},ye=N.set,de=N.getterFor("Array Iterator"),ge=function(t,e,r,o,i,u,a){!function(t,e,r){var n=e+" Iterator";t.prototype=kt(ce,{next:d(1,r)}),ae(t,n,!1)}(r,e,o);var c,l,s,f=function(t){if(t===i&&b)return b;if(!fe&&t in y)return y[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},p=e+" Iterator",h=!1,y=t.prototype,v=y[pe]||y["@@iterator"]||i&&y[i],b=!fe&&v||f(i),S="Array"==e&&y.entries||v;if(S&&(c=ee(S.call(new t)),se!==Object.prototype&&c.next&&(ee(c)!==se&&(le?le(c,se):"function"!=typeof c[pe]&&g(c,pe,he)),ae(c,p,!0))),"values"==i&&v&&"values"!==v.name&&(h=!0,b=function(){return v.call(this)}),y[pe]!==b&&g(y,pe,b),i)if(l={values:f("values"),keys:u?b:f("keys"),entries:f("entries")},a)for(s in l)(fe||h||!(s in y))&&z(y,s,l[s]);else!function(t,e){var r,o,i,u,a,c=t.target,l=t.global,s=t.stat;if(r=l?n:s?n[c]||m(c,{}):(n[c]||{}).prototype)for(o in e){if(u=e[o],i=t.noTargetGet?(a=Qt(r,o))&&a.value:r[o],!Jt(l?o:c+(s?".":"#")+o,t.forced)&&void 0!==i){if(typeof u==typeof i)continue;Ht(u,i)}(t.sham||i&&i.sham)&&g(u,"sham",!0),z(r,o,u,t)}}({target:e,proto:!0,forced:fe||h},l);return l}(Array,"Array",(function(t,e){ye(this,{type:"Array Iterator",target:tt(t),index:0,kind:e})}),(function(){var t=de(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");Ct("keys"),Ct("values"),Ct("entries");var ve=ut("iterator"),be=ut("toStringTag"),me=ge.values;for(var Se in X){var Oe=n[Se],we=Oe&&Oe.prototype;if(we){if(we[ve]!==me)try{g(we,ve,me)}catch(t){we[ve]=me}if(we[be]||g(we,be,Se),X[Se])for(var je in ge)if(we[je]!==ge[je])try{g(we,je,ge[je])}catch(t){we[je]=ge[je]}}}function Te(t,e){var r=e.get(t);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(t):r.value}function Le(t,e,r){var n=e.get(t);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(t,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}function Me(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var ke=new WeakMap,Ee=new WeakMap,Pe=new WeakMap,_e=new WeakMap,xe=new WeakSet,Ae=new WeakSet;var Ce=function(){return{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}},Ie=function(){return"".concat(this.prefix,"Mobserver")},Re=function(t,e,r){let n=this.getCacheKey(t),o=new MutationObserver(e||function(t){console.log(t)}),i=Te(this,ke).get(n)||{};return i[r=r||this.uuid]=o,Te(this,ke).set(n,i),{name:r,observer:o}},Fe=function(t,e,r,n){t=this.selector(t);let o=Me(this,xe,Re).call(this,t,e,n);return o.observer.observe(t,r),o};return new class{constructor(){Ae.add(this),xe.add(this),_e.set(this,{get:Ie,set:void 0}),Pe.set(this,{get:Ce,set:void 0}),ke.set(this,{writable:!0,value:void 0}),Ee.set(this,{writable:!0,value:"zc"}),Le(this,ke,new Map)}get prefix(){return Te(this,Ee)}set prefix(t){Le(this,Ee,"string"==typeof t&&t.length?t:"zc")}get uuid(){return[Math.random().toString(16).slice(2),(new Date).getTime().toString(16),Math.random().toString(16).slice(2)].join("").slice(2,34)}selector(t){if("string"==typeof t&&(t=document.querySelector(t)),!(t&&t instanceof HTMLElement))throw new Error("无效的 target！");return t}getCacheKey(t){let e=(t=this.selector(t)).dataset[Te(this,_e)];return e||(e=this.uuid,t.dataset[Te(this,_e)]=e),e}observe(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r=r||{},Me(this,Ae,Fe).call(this,t,e,r,n)}observeAll(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=Te(this,Pe);return Array.isArray(r)&&r.length&&(o.attributeFilter=r),Me(this,Ae,Fe).call(this,t,e,o,n)}attribute(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Me(this,Ae,Fe).call(this,t,e,{attributes:!0,attributeOldValue:!0},r)}attributeChild(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Me(this,Ae,Fe).call(this,t,e,{subtree:!0,attributes:!0,attributeOldValue:!0},r)}attributeFilter(t,e,r,n){let o={attributes:!0,attributeFilter:r,attributeOldValue:!0};return Me(this,Ae,Fe).call(this,t,e,o,n)}attributeFilterChild(t,e,r,n){let o={subtree:!0,attributes:!0,attributeFilter:r,attributeOldValue:!0};return Me(this,Ae,Fe).call(this,t,e,o,n)}node(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Me(this,Ae,Fe).call(this,t,e,{childList:!0},r)}nodeChild(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Me(this,Ae,Fe).call(this,t,e,{subtree:!0,childList:!0},r)}character(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Me(this,Ae,Fe).call(this,t,e,{subtree:!0,characterData:!0,characterDataOldValue:!0},r)}disconnect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.getCacheKey(t),n=Te(this,ke).get(r);if(n){if(null===e)return Object.values(n).forEach(t=>{t.disconnect()}),!0;if(e&&n[e])return n[e].disconnect(),!0}return!1}takeRecords(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.getCacheKey(t),n=Te(this,ke).get(r),o={};if(n){if(null===e)for(let t in n)o[t]=n[t].takeRecords();e&&n[e]&&(o[e]=n[e].takeRecords())}return o}}}));
