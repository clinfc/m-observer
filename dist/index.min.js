!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/es.object.assign"),require("core-js/modules/web.dom-collections.iterator")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es.object.assign","core-js/modules/web.dom-collections.iterator"],t):t((e=e||self).MObserver={})}(this,(function(e){"use strict";function t(){}function r(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}var n=new WeakMap;class o{get el(){return function(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}(this,n)}constructor(e){if(n.set(this,{writable:!0,value:void 0}),e instanceof o?r(this,n,e.el):!function(e){return"string"==typeof e}(e)?(function(e){return e instanceof Node}(e)||function(e){return e instanceof Element}(e))&&r(this,n,e):r(this,n,document.querySelector(e)),!this.el)throw new Error("无效的监听对象！")}data(e,t){let r=this.el.dataSource;return r||(r=new Map,this.el.dataSource=r),t?(r.set(e,t),this):r.get(e)}}function i(e){return new o(e)}const u={attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0};function a(e){let t=e.data("m-observer");return t||(t=new Map,e.data("m-observer",t)),t}function c(e,t){return a(e).get(t)||{}}function s(e,r,n,o){let u=i(e);(function(e){return"function"==typeof e})(n)||(n=t);let c=new MutationObserver(n);return c.observe(u.el,o),function(e,t,r,n){let o=a(e),i=o.get(t);i&&i.observe&&i.observe.disconnect(),o.set(t,{observe:r,option:n})}(u,r,c,{fn:n,config:o}),c}e.attribute=function(e,t,r){return s(e,t,r,{attributes:!0,attributeOldValue:!0})},e.attributeChild=function(e,t,r){return s(e,t,r,{subtree:!0,attributes:!0,attributeOldValue:!0})},e.attributeFilter=function(e,t,r,n){return s(e,t,r,{attributes:!0,attributeFilter:n,attributeOldValue:!0})},e.attributeFilterChild=function(e,t,r,n){return s(e,t,r,{subtree:!0,attributes:!0,attributeFilter:n,attributeOldValue:!0})},e.character=function(e,t,r){return s(e,t,r,{subtree:!0,characterData:!0,characterDataOldValue:!0})},e.clear=function(e){(function(e){let t=a(e),r=[];return t.forEach((e,t)=>{r.push([t,e])}),t.clear(),r})(i(e)).forEach(e=>{e[1].observe.disconnect()})},e.disconnect=function(e,t){let r=i(e),{observe:n}=c(r,t),o=[];return n&&(o=n.takeRecords(),n.disconnect()),o},e.node=function(e,t,r){return s(e,t,r,{childList:!0})},e.nodeChild=function(e,t,r){return s(e,t,r,{subtree:!0,childList:!0})},e.observe=s,e.observeAll=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=Object.assign({},u,Array.isArray(n)&&n.length?{attributeFilter:n}:{});return s(e,t,r,o)},e.reconnect=function(e,t){let r=i(e),{observe:n,option:o}=c(r,t);if(!n)throw new Error("该监听器不存在（未定义或已被移除）！");return n.observe(r.el,o.config),n},e.remove=function(e,t){let r=i(e),{observe:n}=function(e,t){let r=a(e),n=r.get(t);return n?(r.delete(t),n):{}}(r,t);if(n){let e=n.takeRecords();return n.disconnect(),e}return[]},e.takeRecords=function(e,t){let r=i(e),{observe:n}=c(r,t);return n?n.takeRecords():[]},Object.defineProperty(e,"__esModule",{value:!0})}));
