!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/web.dom-collections.iterator")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/web.dom-collections.iterator"],t):t((e=e||self).MObserver={})}(this,(function(e){"use strict";class t{constructor(e){if(e instanceof t?this.el=e.el:!function(e){return"string"==typeof e}(e)?(function(e){return e instanceof Node}(e)||function(e){return e instanceof Element}(e))&&(this.el=e):this.el=document.querySelector(e),!this.el)throw new Error("无效的监听对象！")}data(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.el.dataSource;return r||(r=new Map,this.el.dataSource=r),void 0!==t?(r.set(e,t),this):r.get(e)}}function r(e){return new t(e)}function n(e){let t=e.data("m-observer");return t||(t=new Map,e.data("m-observer",t)),t}function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n(e),i=o.get(t);return r&&o.delete(t),i||{}}function i(e,t,o){let i=r(e);if(!function(e){return"function"==typeof e}(t))throw new Error("无效的观察回到函数！");let u=new MutationObserver(t);return u.observe(i.el,o),function(e,t,r,o){let i=n(e),u=i.get(t);u&&u.observer&&u.observer.disconnect(),i.set(t,{callback:t,config:r,observer:o})}(i,t,o,u),u}e.attribute=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={subtree:!!r,attributes:!0,attributeOldValue:!0};return i(e,t,n)},e.attributeFilter=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={subtree:!!n,attributes:!0,attributeFilter:r,attributeOldValue:!0};return i(e,t,o)},e.character=function(e,t){return i(e,t,{subtree:!0,characterData:!0,characterDataOldValue:!0})},e.childList=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={subtree:!!r,childList:!0};return i(e,t,n)},e.disconnect=function(e,t){let n=r(e),{observer:i}=o(n,t),u=[];return i&&(u=i.takeRecords(),i.disconnect()),u},e.observe=i,e.reconnect=function(e,t){let n=r(e),{observer:i,config:u}=o(n,t);if(!(i instanceof MutationObserver))throw new Error("该监听器不存在（未定义或已被移除）！");return i.observe(n.el,u),i},e.remove=function(e,t){let n=r(e),{observer:i}=o(n,t,!0);if(i instanceof MutationObserver){let e=i.takeRecords();return i.disconnect(),e}return[]},e.takeRecords=function(e,t){let n=r(e),{observer:i}=o(n,t);return i instanceof MutationObserver?i.takeRecords():[]},Object.defineProperty(e,"__esModule",{value:!0})}));
