!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MObserver=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,c={f:u&&!a.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:a},s=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,l="".split,p=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return f.call(t).slice(8,-1)}(t)?l.call(t,""):Object(t)}:Object,h=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},g=function(t){return p(h(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},d=function(t,e){if(!y(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!y(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!y(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!y(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},v={}.hasOwnProperty,b=function(t,e){return v.call(t,e)},m=n.document,O=y(m)&&y(m.createElement),S=function(t){return O?m.createElement(t):{}},w=!i&&!o((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),j=Object.getOwnPropertyDescriptor,T={f:i?j:function(t,e){if(t=g(t),e=d(e,!0),w)try{return j(t,e)}catch(t){}if(b(t,e))return s(!c.f.call(t,e),t[e])}},L=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},k=Object.defineProperty,M={f:i?k:function(t,e,r){if(L(t),e=d(e,!0),L(r),w)try{return k(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},E=i?function(t,e,r){return M.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t},P=function(t,e){try{E(n,t,e)}catch(r){n[t]=e}return e},_=n["__core-js_shared__"]||P("__core-js_shared__",{}),x=Function.toString;"function"!=typeof _.inspectSource&&(_.inspectSource=function(t){return x.call(t)});var A,I,R,C=_.inspectSource,D=n.WeakMap,F="function"==typeof D&&/native code/.test(C(D)),G=e((function(t){(t.exports=function(t,e){return _[t]||(_[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),V=0,W=Math.random(),N=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++V+W).toString(36)},q=G("keys"),z=function(t){return q[t]||(q[t]=N(t))},H={},K=n.WeakMap;if(F){var B=new K,Y=B.get,U=B.has,X=B.set;A=function(t,e){return X.call(B,t,e),e},I=function(t){return Y.call(B,t)||{}},R=function(t){return U.call(B,t)}}else{var J=z("state");H[J]=!0,A=function(t,e){return E(t,J,e),e},I=function(t){return b(t,J)?t[J]:{}},R=function(t){return b(t,J)}}var Q={set:A,get:I,has:R,enforce:function(t){return R(t)?I(t):A(t,{})},getterFor:function(t){return function(e){var r;if(!y(e)||(r=I(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},Z=e((function(t){var e=Q.get,r=Q.enforce,o=String(String).split("String");(t.exports=function(t,e,i,a){var u=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,s=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||b(i,"name")||E(i,"name",e),r(i).source=o.join("string"==typeof e?e:"")),t!==n?(u?!s&&t[e]&&(c=!0):delete t[e],c?t[e]=i:E(t,e,i)):c?t[e]=i:P(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||C(this)}))})),$=n,tt=function(t){return"function"==typeof t?t:void 0},et=function(t,e){return arguments.length<2?tt($[t])||tt(n[t]):$[t]&&$[t][e]||n[t]&&n[t][e]},rt=Math.ceil,nt=Math.floor,ot=function(t){return isNaN(t=+t)?0:(t>0?nt:rt)(t)},it=Math.min,at=Math.max,ut=Math.min,ct=function(t){return function(e,r,n){var o,i,a=g(e),u=(o=a.length)>0?it(ot(o),9007199254740991):0,c=function(t,e){var r=ot(t);return r<0?at(r+e,0):ut(r,e)}(n,u);if(t&&r!=r){for(;u>c;)if((i=a[c++])!=i)return!0}else for(;u>c;c++)if((t||c in a)&&a[c]===r)return t||c||0;return!t&&-1}},st={includes:ct(!0),indexOf:ct(!1)}.indexOf,ft=function(t,e){var r,n=g(t),o=0,i=[];for(r in n)!b(H,r)&&b(n,r)&&i.push(r);for(;e.length>o;)b(n,r=e[o++])&&(~st(i,r)||i.push(r));return i},lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pt=lt.concat("length","prototype"),ht={f:Object.getOwnPropertyNames||function(t){return ft(t,pt)}},gt={f:Object.getOwnPropertySymbols},yt=et("Reflect","ownKeys")||function(t){var e=ht.f(L(t)),r=gt.f;return r?e.concat(r(t)):e},dt=function(t,e){for(var r=yt(e),n=M.f,o=T.f,i=0;i<r.length;i++){var a=r[i];b(t,a)||n(t,a,o(e,a))}},vt=/#|\.prototype\./,bt=function(t,e){var r=Ot[mt(t)];return r==wt||r!=St&&("function"==typeof e?o(e):!!e)},mt=bt.normalize=function(t){return String(t).replace(vt,".").toLowerCase()},Ot=bt.data={},St=bt.NATIVE="N",wt=bt.POLYFILL="P",jt=bt,Tt=T.f,Lt=function(t,e){var r,o,i,a,u,c=t.target,s=t.global,f=t.stat;if(r=s?n:f?n[c]||P(c,{}):(n[c]||{}).prototype)for(o in e){if(a=e[o],i=t.noTargetGet?(u=Tt(r,o))&&u.value:r[o],!jt(s?o:c+(f?".":"#")+o,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;dt(a,i)}(t.sham||i&&i.sham)&&E(a,"sham",!0),Z(r,o,a,t)}},kt=Object.keys||function(t){return ft(t,lt)},Mt=function(t){return Object(h(t))},Et=Object.assign,Pt=Object.defineProperty,_t=!Et||o((function(){if(i&&1!==Et({b:1},Et(Pt({},"a",{enumerable:!0,get:function(){Pt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Et({},t)[r]||"abcdefghijklmnopqrst"!=kt(Et({},e)).join("")}))?function(t,e){for(var r=Mt(t),n=arguments.length,o=1,a=gt.f,u=c.f;n>o;)for(var s,f=p(arguments[o++]),l=a?kt(f).concat(a(f)):kt(f),h=l.length,g=0;h>g;)s=l[g++],i&&!u.call(f,s)||(r[s]=f[s]);return r}:Et;Lt({target:"Object",stat:!0,forced:Object.assign!==_t},{assign:_t});var xt=function(){var t=L(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},At=RegExp.prototype,It=At.toString,Rt=o((function(){return"/a/b"!=It.call({source:"a",flags:"b"})})),Ct="toString"!=It.name;(Rt||Ct)&&Z(RegExp.prototype,"toString",(function(){var t=L(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in At)?xt.call(t):r)}),{unsafe:!0});var Dt,Ft={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Gt=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Vt=Gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wt=G("wks"),Nt=n.Symbol,qt=Vt?Nt:Nt&&Nt.withoutSetter||N,zt=function(t){return b(Wt,t)||(Gt&&b(Nt,t)?Wt[t]=Nt[t]:Wt[t]=qt("Symbol."+t)),Wt[t]},Ht=i?Object.defineProperties:function(t,e){L(t);for(var r,n=kt(e),o=n.length,i=0;o>i;)M.f(t,r=n[i++],e[r]);return t},Kt=et("document","documentElement"),Bt=z("IE_PROTO"),Yt=function(){},Ut=function(t){return"<script>"+t+"<\/script>"},Xt=function(){try{Dt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Xt=Dt?function(t){t.write(Ut("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Dt):((e=S("iframe")).style.display="none",Kt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ut("document.F=Object")),t.close(),t.F);for(var r=lt.length;r--;)delete Xt.prototype[lt[r]];return Xt()};H[Bt]=!0;var Jt=Object.create||function(t,e){var r;return null!==t?(Yt.prototype=L(t),r=new Yt,Yt.prototype=null,r[Bt]=t):r=Xt(),void 0===e?r:Ht(r,e)},Qt=zt("unscopables"),Zt=Array.prototype;null==Zt[Qt]&&M.f(Zt,Qt,{configurable:!0,value:Jt(null)});var $t,te,ee,re=function(t){Zt[Qt][t]=!0},ne=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),oe=z("IE_PROTO"),ie=Object.prototype,ae=ne?Object.getPrototypeOf:function(t){return t=Mt(t),b(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ie:null},ue=zt("iterator"),ce=!1;[].keys&&("next"in(ee=[].keys())?(te=ae(ae(ee)))!==Object.prototype&&($t=te):ce=!0),null==$t&&($t={}),b($t,ue)||E($t,ue,(function(){return this}));var se={IteratorPrototype:$t,BUGGY_SAFARI_ITERATORS:ce},fe=M.f,le=zt("toStringTag"),pe=function(t,e,r){t&&!b(t=r?t:t.prototype,le)&&fe(t,le,{configurable:!0,value:e})},he=se.IteratorPrototype,ge=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return L(r),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),ye=se.IteratorPrototype,de=se.BUGGY_SAFARI_ITERATORS,ve=zt("iterator"),be=function(){return this},me=Q.set,Oe=Q.getterFor("Array Iterator"),Se=function(t,e,r,n,o,i,a){!function(t,e,r){var n=e+" Iterator";t.prototype=Jt(he,{next:s(1,r)}),pe(t,n,!1)}(r,e,n);var u,c,f,l=function(t){if(t===o&&d)return d;if(!de&&t in g)return g[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},p=e+" Iterator",h=!1,g=t.prototype,y=g[ve]||g["@@iterator"]||o&&g[o],d=!de&&y||l(o),v="Array"==e&&g.entries||y;if(v&&(u=ae(v.call(new t)),ye!==Object.prototype&&u.next&&(ae(u)!==ye&&(ge?ge(u,ye):"function"!=typeof u[ve]&&E(u,ve,be)),pe(u,p,!0))),"values"==o&&y&&"values"!==y.name&&(h=!0,d=function(){return y.call(this)}),g[ve]!==d&&E(g,ve,d),o)if(c={values:l("values"),keys:i?d:l("keys"),entries:l("entries")},a)for(f in c)(de||h||!(f in g))&&Z(g,f,c[f]);else Lt({target:e,proto:!0,forced:de||h},c);return c}(Array,"Array",(function(t,e){me(this,{type:"Array Iterator",target:g(t),index:0,kind:e})}),(function(){var t=Oe(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");re("keys"),re("values"),re("entries");var we=zt("iterator"),je=zt("toStringTag"),Te=Se.values;for(var Le in Ft){var ke=n[Le],Me=ke&&ke.prototype;if(Me){if(Me[we]!==Te)try{E(Me,we,Te)}catch(t){Me[we]=Te}if(Me[je]||E(Me,je,Le),Ft[Le])for(var Ee in Se)if(Me[Ee]!==Se[Ee])try{E(Me,Ee,Se[Ee])}catch(t){Me[Ee]=Se[Ee]}}}function Pe(t,e){var r=e.get(t);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(t):r.value}function _e(t,e,r){var n=e.get(t);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(t,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}function xe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Ae=new WeakMap,Ie=new WeakMap,Re=new WeakMap,Ce=new WeakMap,De=new WeakSet,Fe=new WeakSet;var Ge=function(){return{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}},Ve=function(){return"".concat(this.prefix,"Mobserver")},We=function(t,e,r){let n=this.getCacheKey(t),o=new MutationObserver(e||function(t){console.log(t)}),i=Pe(this,Ae).get(n)||{};return i[r=r||n]=o,Pe(this,Ae).set(n,i),{name:r,observer:o}},Ne=function(t,e,r,n){t=this.getTarget(t);let o=xe(this,De,We).call(this,t,e,n);return o.observer.observe(t,r),o};return new class{constructor(){Fe.add(this),De.add(this),Ce.set(this,{get:Ve,set:void 0}),Re.set(this,{get:Ge,set:void 0}),Ae.set(this,{writable:!0,value:void 0}),Ie.set(this,{writable:!0,value:"zc"}),_e(this,Ae,new Map)}get prefix(){return Pe(this,Ie)}set prefix(t){_e(this,Ie,"string"==typeof t&&t.length?t:"zc")}get uuid(){return[Math.random().toString(16).slice(2),(new Date).getTime().toString(16),Math.random().toString(16).slice(2)].join("").slice(2,34)}getTarget(t){if("string"==typeof t&&(t=document.querySelector(t)),!(t&&t instanceof HTMLElement))throw new Error("无效的 target！");return t}getCacheKey(t){let e=(t=this.getTarget(t)).dataset[Pe(this,Ce)];return e||(e=this.uuid,t.dataset[Pe(this,Ce)]=e),e}disconnect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.getCacheKey(t),n=Pe(this,Ae).get(r);if(n){if(null===e)return Object.values(n).forEach(t=>{t.disconnect()}),!0;if(e&&n[e])return n[e].disconnect(),!0}return!1}takeRecords(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.getCacheKey(t),n=Pe(this,Ae).get(r),o={};if(n){if(null===e)for(let t in n)o[t]=n[t].takeRecords();e&&n[e]&&(o[e]=n[e].takeRecords())}return o}observe(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r=Object.assign(Pe(this,Re),r||{}),xe(this,Fe,Ne).call(this,t,e,r,n)}attributes(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r=Object.assign(r||{},{attributes:!0}),xe(this,Fe,Ne).call(this,t,e,r,n)}childList(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r=Object.assign(r||{},{childList:!0}),xe(this,Fe,Ne).call(this,t,e,r,n)}subtree(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r=Object.assign(r||{},{subtree:!0}),xe(this,Fe,Ne).call(this,t,e,r,n)}character(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r=Object.assign(r||{},{characterData:!0,characterDataOldValue:!0}),xe(this,Fe,Ne).call(this,t,e,r,n)}}}));
